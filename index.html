<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>To Do List App</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/sort@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-gray-100">
    <div class="h-screen flex flex-col items-center justify-center"
         x-data="{
            tasks: ['Clean room', 'Read 10 Sites', 'Learn AlpineJS & Tailwind'],
            search: '',

            get filteredTasks() {
                return this.tasks.filter(
                    i => i.toLowerCase().includes(this.search.toLowerCase())
                )
            },

            addTask() {
                for (i = 0; i < this.tasks.length; i++) {
                    if (this.tasks[i] === this.search) {
                        return true
                    }
                }
                this.tasks.push(this.search)
            },
            deleteTask(index) {
                this.tasks.splice(index, 1)
                console.log(index)
            }
    }">
        <h2 class="text-2xl font-abold mt-5 mb-5">To Do Listüìù</h2>
        <input type="text" class="border-1 border-gray-700 rounded-md p-2 w-100 mb-5" placeholder="Search or add Task..." x-model="search" @keyup.enter="addTask()">
        <ul x-sort>
            <template x-for="(value, index) in filteredTasks" class="bg-white rounded-md">
                <li x-sort:item x-sort:group="todos"
                    class="flex flex-row items-center w-100 bg-white mb-2 rounded p-2 justify-between">
                    <div class="flex flex-row items-center">
                        <input type="checkbox" class="mr-2">
                        <p x-text="value"></p>
                    </div>
                    <div>
                        <button @click="deleteTask(index)"
                                class="right-3 w-3 h-3 cursor-pointer hover:opacity-70 transition duration-300">
                            <img src="Assets/trashcan.png">
                        </button>
                    </div>
                </li>
            </template>
        </ul>

    </div>
</body>
</html>